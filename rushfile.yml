offline_run: |

    if [ -d "./venv" ]
    then
      source venv/bin/activate
    fi

    pip3 install -r requirements.txt
    python run.py

    else
    python3 -m venv venv
    source venv/bin/activate
    pip3 install -r requirements.txt
    python run.py
    fi

_docker_cleanup: |
    # add tags and container name
    TAGNAME=flask_template
    CONTAINERNAME=flask_template

    # stop running container
    sudo docker stop $CONTAINERNAME

    # remove container
    sudo docker rm $CONTAINERNAME

    # remove previous image
    sudo docker rmi "$(docker images --format '{{.Repository}}:{{.Tag}}' | grep $TAGNAME)"

    # remove dangling images
    sudo docker image prune --force

docker_deploy: |

    _docker_cleanup

    # add option to run container in detached mode
    sudo docker-compose build

    read -p 'Want to deploy docker container in detached mode? (y/n):' daemon

    if [[ $daemon == "y" ]]; then
        echo "Running container in detached mode."
        sudo docker-compose up -d

    elif [[ $daemon == "n" ]]; then
        echo "Running container in attached mode."
        sudo docker-compose up

    else
        echo "Running container in attached mode."
        sudo docker-compose up
    fi
